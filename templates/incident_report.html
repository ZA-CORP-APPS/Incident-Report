<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Incident Report #{{ incident.id }} - Incident Log System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        @media print {
            .no-print {
                display: none !important;
            }
            body {
                background: white;
            }
            .container {
                max-width: 100%;
                padding: 0;
            }
            .severity-badge {
                border: 1px solid #000;
                padding: 2px 8px;
                font-weight: bold;
            }
        }
        
        @media screen {
            body {
                padding: 20px;
                background: #f5f5f5;
            }
            .report-container {
                background: white;
                padding: 40px;
                box-shadow: 0 0 10px rgba(0,0,0,0.1);
                max-width: 900px;
                margin: 0 auto;
            }
        }
        
        .report-header {
            border-bottom: 3px solid #0d6efd;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .report-title {
            font-size: 24px;
            font-weight: bold;
            color: #0d6efd;
        }
        
        .field-label {
            font-weight: bold;
            color: #495057;
            margin-bottom: 5px;
        }
        
        .field-value {
            margin-bottom: 20px;
            padding: 10px;
            background: #f8f9fa;
            border-left: 3px solid #0d6efd;
        }
        
        .severity-low { color: #28a745; }
        .severity-medium { color: #ffc107; }
        .severity-high { color: #fd7e14; }
        .severity-critical { color: #dc3545; }
        
        .report-footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #dee2e6;
            font-size: 12px;
            color: #6c757d;
        }
    </style>
</head>
<body>
    <div class="report-container">
        <div class="no-print mb-3">
            <a href="{{ url_for('view_incident', id=incident.id) }}" class="btn btn-secondary">
                <i class="bi bi-arrow-left"></i> Back to Incident
            </a>
            <button onclick="window.print()" class="btn btn-primary">
                <i class="bi bi-printer"></i> Print / Save as PDF
            </button>
        </div>
        
        <div class="report-header">
            <div class="report-title">INCIDENT REPORT #{{ incident.id }}</div>
            <div class="mt-2 text-muted">Generated on {{ now().strftime('%B %d, %Y at %I:%M %p') }}</div>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="field-label">Incident Date & Time</div>
                <div class="field-value">
                    {{ incident.incident_datetime.strftime('%B %d, %Y at %I:%M %p') if incident.incident_datetime else 'N/A' }}
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="field-label">Camera Location</div>
                <div class="field-value">
                    {{ incident.camera_location or 'Not specified' }}
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-12">
                <div class="field-label">Severity Level</div>
                <div class="field-value">
                    <span class="badge 
                        {% if incident.severity == 'Low' %}bg-success
                        {% elif incident.severity == 'Medium' %}bg-warning
                        {% elif incident.severity == 'High' %}bg-orange text-dark
                        {% elif incident.severity == 'Critical' %}bg-danger
                        {% endif %} severity-badge">
                        {{ incident.severity or 'Low' }}
                    </span>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-12">
                <div class="field-label">Incident Description</div>
                <div class="field-value">
                    {{ incident.incident_description }}
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-12">
                <div class="field-label">Persons Involved</div>
                <div class="field-value">
                    {{ incident.persons_involved or 'Not specified' }}
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-12">
                <div class="field-label">Action Taken</div>
                <div class="field-value">
                    {{ incident.action_taken or 'Not specified' }}
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="field-label">Footage Reference</div>
                <div class="field-value">
                    {{ incident.footage_reference or 'Not specified' }}
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="field-label">Attachment</div>
                <div class="field-value">
                    {% if incident.attachment_filename %}
                        {{ incident.attachment_filename }}
                    {% else %}
                        No attachment
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="field-label">Reported By</div>
                <div class="field-value">
                    {{ incident.reported_by or 'Not specified' }}
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="field-label">Reviewed By</div>
                <div class="field-value">
                    {{ incident.reviewed_by or 'Not reviewed' }}
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-12">
                <div class="field-label">Remarks / Outcome</div>
                <div class="field-value">
                    {{ incident.remarks_outcome or 'No remarks' }}
                </div>
            </div>
        </div>
        
        <div class="report-footer">
            <div><strong>Report Information</strong></div>
            <div>Created: {{ incident.created_at.strftime('%B %d, %Y at %I:%M %p') if incident.created_at else 'N/A' }}</div>
            <div>Last Updated: {{ incident.updated_at.strftime('%B %d, %Y at %I:%M %p') if incident.updated_at else 'N/A' }}</div>
            <div class="mt-2">This is an official incident report from the Incident Log System.</div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
